/*! table-scroll.9df46412 Tue Mar 07 2023 15:07:39 GMT+0000 (Coordinated Universal Time) */
(window.vanillaJsonp=window.vanillaJsonp||[]).push([["table-scroll"],{"./src/progressive/ts/table-scroll.ts":function(t,e,n){"use strict";n.r(e);var i=n("./node_modules/tsmonad/dist/tsmonad.js"),o=n("./src/progressive/ts/utils/debouncer.ts"),s=n("./src/progressive/ts/utils/is-safari.ts"),a=n("./src/progressive/ts/utils/monadic-dom.ts"),c=n("./node_modules/fastdom/fastdom.js"),l=n.n(c),r=i.Maybe.sequence,u=function(t,e,n,i){var o=0;i&&(o=i.offsetHeight,l.a.mutate((function(){t.style.marginTop="".concat(o,"px")}))),l.a.mutate((function(){n?(t.style.display="block",t.style.height="".concat(e.scrollHeight-o,"px")):t.style.display="none"}))},d=function(t,e,n){l.a.mutate((function(){t&&n&&(t.style.width="".concat(e.offsetWidth,"px"))}))},f=function(){l.a.measure((function(){Object(a.b)(".articletable",document).caseOf({just:function(t){Array.prototype.slice.call(t).forEach((function(t){r({rightFade:Object(a.a)(".articletable__fade--right",t),table:Object(a.a)("table",t),skipTableButton:Object(a.a)(".articletable__skip",t),tableLinks:Object(a.b)("a",t)}).fmap((function(t){return Object.assign({},t,{rightFade:t.rightFade,table:t.table,skipTableButton:t.skipTableButton,tableLinks:t.tableLinks})})).caseOf({just:function(e){var n,i=e.rightFade,a=e.table,c=e.skipTableButton,r=e.tableLinks,f=(n=t).scrollWidth>n.offsetWidth,b=a.querySelector("caption");d(b,t,f),u(i,a,f,b),function(t,e){var n=e.scrollWidth-e.clientWidth,i=function(n){return Object(o.a)((function(){l.a.mutate((function(){t.style.visibility=e.scrollLeft>=n?"hidden":"visible"}))}),20)},s=i(n);e.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",Object(o.a)((function(){e.removeEventListener("scroll",s),n=e.scrollWidth-e.clientWidth,s=i(n),e.addEventListener("scroll",s,{passive:!0}),s()}),200))}(i,t),function(t){var e,n=function(n){var i=n.clientX-e;e=n.clientX;var o=t.scrollLeft,s=t.scrollWidth-t.clientWidth,a=o-i;a<0?a=0:a>s&&(a=s),l.a.mutate((function(){t.scrollLeft=a}))};t.addEventListener("mousedown",(function(t){e=t.clientX;var i=t.target;i&&(i.closest(".firstcol")||document.addEventListener("mousemove",n))})),document.addEventListener("mouseup",(function(){document.removeEventListener("mousemove",n)}))}(t),window.IntersectionObserver&&!Object(s.a)()&&(function(t,e){new IntersectionObserver((function(t,n){t.forEach((function(t){if(t.isIntersecting){var n=t.boundingClientRect;-1!==Math.sign(n.y)&&window.innerWidth<=575&&l.a.mutate((function(){e.style.display="block"}))}else l.a.mutate((function(){e.style.display="none"}))}))}),{threshold:[0,1]}).observe(t)}(t,c),function(t,e){var n=e.querySelector(".skip__text");n&&n.addEventListener("click",(function(){var n=t.getBoundingClientRect();l.a.mutate((function(){window.scrollTo(0,n.y+window.pageYOffset+t.offsetHeight),e.style.display="none"}))}))}(t,c)),function(t){Array.prototype.slice.call(t).forEach((function(t){l.a.mutate((function(){t.setAttribute("rel","nofollow"),t.setAttribute("target","_blank")}))}))}(r),window.addEventListener("resize",Object(o.a)((function(){d(b,t,f),u(i,a,f,b)}),200))},nothing:function(){return console.log("No inner table")}})}))},nothing:function(){return console.log("No tables in article")}})}))};-1===window.location.hostname.indexOf("cyclingnews")&&("complete"===document.readyState||"interactive"===document.readyState?f():document.addEventListener("DOMContentLoaded",f))}}]);
//# sourceMappingURL=table-scroll.b9d7ab8ddcdc9b5d2133.chunk.js.map